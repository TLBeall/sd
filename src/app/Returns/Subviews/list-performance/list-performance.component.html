<div *ngIf="this.pageReady == false" class="loading-indicator">
  <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
<<<<<<< HEAD
<div *ngIf="this.pageReady == true" style="margin-top:100px">

  <table mat-table [dataSource]="ListPerformanceArr" matSort (matSortChange)="SortFunction($event, ListPerformanceArr)" multiTemplateDataRows>
=======
<div *ngIf="this.pageReady == true">
    <app-toolbar></app-toolbar>
<table mat-table [dataSource]="ListPerformanceArr" matSort (matSortChange)="SortFunction($event, ListPerformanceArr)" multiTemplateDataRows>
>>>>>>> f00a3035a63d74cb31129fdae436e35ec365e2d1
  <ng-container matColumnDef="Expand">
    <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
    <td mat-cell *matCellDef="let element" class="expandBtnColumn">
      <button mat-icon-button (click)="ToggleExpansion(element)" class="returnsExpCollBtn">
        <i class="material-icons" [ngClass]="CollapseListBtn(element) ? 'mi_expand_more' : 'mi_chevron_right'"></i>
      </button>
    </td>
    <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
  </ng-container>
  <ng-container matColumnDef="Client">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Client </th>
    <td mat-cell *matCellDef="let element"> {{element.Client}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
  </ng-container>
  <ng-container matColumnDef="Phase">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Phase </th>
    <td mat-cell *matCellDef="let element"> {{element.Phase}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
  </ng-container>
  <ng-container matColumnDef="MailCode">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> MailCode </th>
    <td mat-cell *matCellDef="let element"> {{element.MailCode}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
  </ng-container>
  <ng-container matColumnDef="ListOwner">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> List </th>
    <td mat-cell *matCellDef="let element" title="{{ element.ListOwnerName }}"> {{element.ListOwnerAbr}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
  </ng-container>
  <ng-container matColumnDef="ListManager">
      <th mat-header-cell mat-sort-header *matHeaderCellDef> Manager </th>
      <td mat-cell *matCellDef="let element" title="{{ element.ListManagerName }}"> {{element.ListManagerAbr}} </td>
      <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
    </ng-container>
    <ng-container matColumnDef="RecencyString">
        <th mat-header-cell mat-sort-header *matHeaderCellDef> Recency </th>
        <td mat-cell *matCellDef="let element" title="{{ element.Description }}"> {{element.RecencyString}} </td>
        <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
      </ng-container>
  <ng-container matColumnDef="ExchangeFlag">
    <th mat-header-cell *matHeaderCellDef> FF </th>
    <td mat-cell *matCellDef="let element"> {{element.ExchangeFlag}} </td>
    <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
  </ng-container>
  <ng-container matColumnDef="Mailed">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Mailed </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.Mailed | date:'shortDate'}} </td>
  </ng-container>
  <ng-container matColumnDef="Caged">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Caged </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.Caged | date:'shortDate'}} </td>
  </ng-container>
  <ng-container matColumnDef="Quantity">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Qty </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.Quantity | number}} </td>
  </ng-container>
  <ng-container matColumnDef="Donors">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Don </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.Donors | number}} </td>
  </ng-container>
  <ng-container matColumnDef="NonDonors">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Non </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.NonDonors | number}} </td>
  </ng-container>
  <ng-container matColumnDef="NewDonors">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> New </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.NewDonors | number}} </td>
  </ng-container>
  <ng-container matColumnDef="RSP">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> RSP </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.RSP | percent:'1.2-2'}} </td>
  </ng-container>
  <ng-container matColumnDef="AVG">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> AVG </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.AVG | number:'1.2-2'}} </td>
  </ng-container>
  <ng-container matColumnDef="Gross">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Gross </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.Gross | currency : 'USD' : 'symbol' : '1.0-0'}} </td>
  </ng-container>
  <ng-container matColumnDef="Cost">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Cost </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.Cost | currency : 'USD' : 'symbol' : '1.0-0'}} </td>
  </ng-container>
  <ng-container matColumnDef="Net">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> Net </th>
    <td mat-cell *matCellDef="let element" [class.negative]="element.Measure.Net < 0">
      {{element.Measure.Net | currency : 'USD' : 'symbol' : '1.0-0'}} </td>
  </ng-container>
  <ng-container matColumnDef="GPP">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> GPP </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.GPP | currency}} </td>
  </ng-container>
  <ng-container matColumnDef="CLM">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> CLM </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.CLM | currency}} </td>
  </ng-container>
  <ng-container matColumnDef="NLM">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> NLM </th>
    <td mat-cell *matCellDef="let element" [class.negative]="element.Measure.NLM < 0">
      {{element.Measure.NLM | currency}} </td>
  </ng-container>
  <ng-container matColumnDef="IO">
    <th mat-header-cell mat-sort-header *matHeaderCellDef> IO </th>
    <td mat-cell *matCellDef="let element"> {{element.Measure.IO | number : '1.2-2'}} </td>
  </ng-container>

  <!-- ['Expand','PackageTitle', 'PackageFormat', 'None','None','PackageMailed', 'PackageCaged', 'PackageQuantity', 
  'PackageDonors', 'PackageNonDonors', 'PackageNewDonors', 'PackageRSP', 'PackageAVG', 
  'PackageGross', 'PackageCost', 'PackageNet', 'PackageGPP', 'PackageCLM', 'PackageNLM', 'PackageIO']; -->

    <ng-container matColumnDef="PackageTitle">
      <td mat-cell *matCellDef="let element"> {{element.PackageTitle}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageFormat">
      <td mat-cell *matCellDef="let element"> {{element.PackageFormat}} </td>
      <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
    </ng-container>
    <ng-container matColumnDef="None">
      <td mat-cell *matCellDef="let element">  </td>
    </ng-container>
    <ng-container matColumnDef="PackageMailed">
      <td mat-cell *matCellDef="let element"> {{element.PackageMailed | date:'shortDate'}} </td>
      <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
    </ng-container>
    <ng-container matColumnDef="PackageCaged">
      <td mat-cell *matCellDef="let element"> {{element.PackageCaged | date:'shortDate'}} </td>
      <!-- <td mat-footer-cell *matFooterCellDef> Total {{_g.rootReturns[0].Client}} </td> -->
    </ng-container>
    <ng-container matColumnDef="PackageQuantity">
      <td mat-cell *matCellDef="let element"> {{element.PackageQuantity | number}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageDonors">
      <td mat-cell *matCellDef="let element"> {{element.PackageDonors | number}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageNonDonors">
      <td mat-cell *matCellDef="let element"> {{element.PackageNonDonors | number}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageNewDonors">
      <td mat-cell *matCellDef="let element"> {{element.PackageNewDonors | number}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageRSP">
      <td mat-cell *matCellDef="let element"> {{element.PackageRSP | percent:'1.2-2'}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageAVG">
      <td mat-cell *matCellDef="let element"> {{element.PackageAVG | number:'1.2-2'}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageGross">
      <td mat-cell *matCellDef="let element"> {{element.PackageGross | currency : 'USD' : 'symbol' : '1.0-0'}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageCost">
      <td mat-cell *matCellDef="let element"> {{element.PackageCost | currency : 'USD' : 'symbol' : '1.0-0'}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageNet">
      <td mat-cell *matCellDef="let element" [class.negative]="element.PackageNet < 0">
        {{element.PackageNet | currency : 'USD' : 'symbol' : '1.0-0'}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageGPP">
      <td mat-cell *matCellDef="let element"> {{element.PackageGPP | currency}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageCLM">
      <td mat-cell *matCellDef="let element"> {{element.PackageCLM | currency}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageNLM">
      <td mat-cell *matCellDef="let element" [class.negative]="element.PackageNLM < 0">
        {{element.PackageNLM | currency}} </td>
    </ng-container>
    <ng-container matColumnDef="PackageIO">
      <td mat-cell *matCellDef="let element"> {{element.PackageIO | number : '1.2-2'}} </td>
    </ng-container>
    <ng-container matColumnDef="RSPPerformance">
        <td mat-cell *matCellDef="let element"> <i class="material-icons" [ngStyle]="{'color':element.PackageRSP > element.Measure.RSP ? 'red' : 'green' }" [ngClass]="element.PackageRSP > element.Measure.RSP ? 'mi_expand_more' : 'mi_expand_less'"></i></td>
    </ng-container>    
    <ng-container matColumnDef="AVGPerformance">
        <td mat-cell *matCellDef="let element"> <i class="material-icons" [ngStyle]="{'color':element.PackageAVG > element.Measure.AVG ? 'red' : 'green' }" [ngClass]="element.PackageAVG > element.Measure.AVG ? 'mi_expand_more' : 'mi_expand_less'"></i></td>
    </ng-container>    
    <ng-container matColumnDef="IOPerformance">
        <td mat-cell *matCellDef="let element"> <i class="material-icons" [ngStyle]="{'color':element.PackageIO > element.Measure.IO ? 'red' : 'green' }" [ngClass]="element.PackageIO > element.Measure.IO ? 'mi_expand_more' : 'mi_expand_less'"></i></td>
    </ng-container>    

  <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
  <tr mat-row *matRowDef="let element; columns: columnsToDisplay;" [ngStyle]="{'background-color':element.Measure.Expanded ? '#e6e6e6' : 'white' }"> </tr>
  <tr mat-row *matRowDef="let element; columns: packageColumns;" [ngStyle]="{'visibility':element.Measure.Expanded ? 'visible' : 'collapse' }" style="background-color:#F8F8F8"></tr>
  <tr mat-row *matRowDef="let element; columns: package2Columns;" [ngStyle]="{'visibility':element.Measure.Expanded ? 'visible' : 'collapse' }"  style="background-color:#F8F8F8"></tr>
  

</table>
</div>

<!-- Toolbox -->

<!-- <div (clickOutside)="closeToolbox()"> -->

<!--<><><> Main Toolbox <><><>-->
<button title="Tools" (click)="toggle(1)" id="toolboxBtn" class="btn toolboxButtonCollection" [ngClass]="{
  'btnShifted': toolsOpened,
  'hidden': hide
}">
<i class="material-icons">{{toolsIcon}}</i>
</button>
<div class="toolbox" [ngClass]="{
  'shifted': toolsOpened
}">
<!--In order to not have two scrollbars you need to put the inner elements to scroll and the parent to not scroll-->
<div class="toolboxScrollContainer" [ngStyle]="{'visibility': visibility}">
<p>
<mat-form-field>
  <input matInput [matDatepicker]="startDatePicker" [(ngModel)]="fromDate" placeholder="start date">
  <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
  <mat-datepicker #startDatePicker></mat-datepicker>
</mat-form-field>
<mat-form-field>
  <input matInput [matDatepicker]="endDatePicker" [(ngModel)]="toDate" placeholder="end date">
  <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
  <mat-datepicker #endDatePicker></mat-datepicker>
</mat-form-field>
</p>
<p>
<button mat-raised-button color="accent" (click)="applyChanges()"> Search </button>
</p>
</div>
</div>

<!--<><><> L2 Toolbox <><><>-->
<button title="Donor Demographics" (click)="toggle(2)" id="demoToolboxBtn" class="btn toolboxButtonCollection"
[ngClass]="{
'btnShifted': demoOpened,
'hidden': hide
}">
<i class="material-icons">{{l2Icon}}</i>
</button>
<div class="toolbox" [ngClass]="{
'shifted': demoOpened
}">
<!--In order to not have two scrollbars you need to put the inner elements to scroll and the parent to not scroll-->
<div class="toolboxScrollContainer" [ngStyle]="{'visibility': visibility}">

<mat-tab-group color="accent" id="mainReturnsL2box">
<mat-tab class="test2" label="Mailed">
  <p>
    Donizzle doggy auctor maurizzle. Bling bling a tellivizzle izzle nibh pretizzle bizzle. Maecenizzle fo
    yippiyo. Bizzle fo
    shizzle my nizzle lacus shizzlin dizzle maurizzle elementum tristique. Nunc rizzle tortizzle sizzle shiznit
    yo
    porta. In velit fo shizzle, ultricizzle izzle, for sure quizzle, adipiscing quizzle, its fo rizzle. Etizzle
    my
    shizz leo, for sure that's the shizzle, pharetra nizzle, fo shizzle sizzle, turpis. Daahng dawg tellivizzle.
    Cras lorem. Cool vitae erat ut libero check it out adipiscing. Fusce ac crunk shizznit black ullamcorper
    brizzle.
  </p>
</mat-tab>
<mat-tab label="Donors">
  <p>
    Bacon ipsum dolor sit amet landjaeger sausage brisket, jerky drumstick fatback boudin ball tip turducken.
    Pork belly meatball
    t-bone bresaola tail filet mignon kevin turkey ribeye shank flank doner cow kielbasa shankle. Pig swine
    chicken
    hamburger, tenderloin turkey rump ball tip sirloin frankfurter meatloaf boudin brisket ham hock. Hamburger
    venison
    brisket tri-tip andouille pork belly ball tip short ribs biltong meatball chuck. Pork chop ribeye tail short
    ribs, beef hamburger meatball kielbasa rump corned beef porchetta landjaeger flank. Doner rump frankfurter
    meatball
    meatloaf, cow kevin pork pork loin venison fatback spare ribs salami beef ribs.
  </p>
  <p>
    Jerky jowl pork chop tongue, kielbasa shank venison. Capicola shank pig ribeye leberkas filet mignon brisket
    beef kevin tenderloin
    porchetta. Capicola fatback venison shank kielbasa, drumstick ribeye landjaeger beef kevin tail meatball
    pastrami
    prosciutto pancetta. Tail kevin spare ribs ground round ham ham hock brisket shoulder. Corned beef tri-tip
    leberkas
    flank sausage ham hock filet mignon beef ribs pancetta turkey.
  </p>
</mat-tab>
</mat-tab-group>
</div>
</div>
<!-- </div> -->