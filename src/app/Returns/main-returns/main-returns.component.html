<div *ngIf="this.pageReady == false" class="loading-indicator">
    <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
<div *ngIf="(this.pageReady == true) && (this.rootReturns)">
    <app-toolbar></app-toolbar>
    <table id="table1" mat-table [dataSource]="this.rootReturns" multiTemplateDataRows matSort (matSortChange)="SortFunction($event, this.rootReturns)">
        <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let client" class="expandBtnColumn">
                <button mat-icon-button (click)="ToggleExpansion(client)" class="returnsExpCollBtn">
                    <i class="material-icons md-elevation-z6" [ngClass]="CollapseListBtn(client)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button>
                <!-- <button mat-icon-button (click)="NextLevel(client, client.MailTypeList)" class="returnsExpCollBtn testButton">
                        <i class="material-icons" [ngClass]="ReadyToCollapseAll(client.MailTypeList)?'custom_line_weight_icon':'mi_drag_handle'"></i>
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>.
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let client" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" #clientTable [(ngModel)]="client.Measure.Selected" [(indeterminate)]="client.Measure.Indeterminate"
                    (change)="ToogleChecks(client)" *ngIf="selectionMode == true"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="Client">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn testColumn" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                <span>Client</span></th>
            <td mat-cell *matCellDef="let client" class="mailLevelColumn">
                <span class="allCollapseHeader" [ngClass]="{
                        'font-client-lg': GetVisibilityStyle(! client.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! client.Measure.Expanded) == 'visible'
                    }"
                    (click)="NextLevel(client, client.MailTypeList)">{{client.ClientName }}</span>
                <!-- <button mat-button class="allCollapseHeader"
                        [ngClass]="{
                            'font-client-lg': GetVisibilityStyle(! client.Measure.Expanded) == 'collapse',
                            'font-sm': GetVisibilityStyle(! client.Measure.Expanded) == 'visible'
                        }"  (click)="NextLevel(client, client.MailTypeList)">{{client.ClientName }}
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn"> Total Clients </td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let client" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let client" class="exchangeFlagColumn"><span>{{client.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net </th>
            <td mat-cell *matCellDef="let client">
                <span [ngClass]="{'negative':client.Measure.Net < 0}" *ngIf="!client.Measure.Expanded">{{client.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span [ngClass]="{'negative':this.rootReturns[0].Measure.Net < 0}">{{
                    this.grandTotal.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM</th>
            <td mat-cell *matCellDef="let client">
                <span [ngClass]="{'negative':client.Measure.NLM < 0}" *ngIf="!client.Measure.Expanded">{{client.Measure.NLM|currency}}</span></td>
           <td mat-footer-cell *matFooterCellDef><span [ngClass]="{'negative':this.rootReturns[0].Measure.NLM < 0}">{{
                    this.grandTotal.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO </th>
            <td mat-cell *matCellDef="let client"><span *ngIf="!client.Measure.Expanded">{{client.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  MAIL TYPE START  <><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let client" [attr.colspan]="clientDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="client.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="client.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': client.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <table id='table2' mat-table [dataSource]="client.MailTypeList" matSort (matSortChange)="SortFunction($event, client)"
                            multiTemplateDataRows>
                            <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let mailType" class="expandBtnColumn">
                <button mat-icon-button (click)="ToggleExpansion(mailType)" class="returnsExpCollBtn">
                    <i class="material-icons" [ngClass]="CollapseListBtn(mailType)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button>
                <!-- <button mat-icon-button (click)="NextLevel(mailType, mailType.CampaignList)" class="returnsExpCollBtn">
                        <i class="material-icons" [ngClass]="ReadyToCollapseAll(mailType.CampaignList)?'custom_line_weight_icon':'mi_drag_handle'"></i>
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let mailType" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="mailType.Measure.Selected"
                    [(indeterminate)]="mailType.Measure.Indeterminate" (change)="ToogleChecks(mailType)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="MailType">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mail Type </th>
            <!-- <td mat-cell *matCellDef="let mailType" class="mailLevelColumn"> {{mailType.MailType}} </td> -->
            <td mat-cell *matCellDef="let mailType" class="mailLevelColumn">
                <span class="allCollapseHeader" (click)="NextLevel(mailType, mailType.CampaignList)" [ngClass]="{
                        'font-mailType-lg': GetVisibilityStyle(! mailType.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! mailType.Measure.Expanded) == 'visible'
                            }">{{mailType.MailType}}</span>
                <!-- <button mat-button class="allCollapseHeader" (click)="NextLevel(mailType, mailType.CampaignList)" [ngClass]="{
                                'font-mailType-lg': GetVisibilityStyle(! mailType.Measure.Expanded) == 'collapse',
                                'font-sm': GetVisibilityStyle(! mailType.Measure.Expanded) == 'visible'
                                    }">{{mailType.MailType}}</button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>Total
                    {{client.Client}}</span></td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let mailType" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
            </th>
            <td mat-cell *matCellDef="let mailType" class="exchangeFlagColumn"><span>{{mailType.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"></td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell mat-sort-header *matHeaderCellDef [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net </th>
            <td mat-cell *matCellDef="let mailType">
                <span [ngClass]="{'negative':mailType.Measure.Net < 0}" *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span
                    [ngClass]="{'negative':client.Measure.Net < 0}">{{client.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM </th>
            <td mat-cell *matCellDef="let mailType">
                <span [ngClass]="{'negative':mailType.Measure.NLM < 0}" *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span
                    [ngClass]="{'negative':client.Measure.NLM < 0}">{{client.Measure.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="client.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO </th>
            <td mat-cell *matCellDef="let mailType"><span *ngIf="!mailType.Measure.Expanded">{{mailType.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(client.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(client.MailTypeList) == true,
                    'elementLast': client.Measure.IsLast == true,
                    'mailTypeElementDefault': client.Measure.IsLast == false
                }"><span>{{client.Measure.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  CAMPAIGN START  <><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let mailType" [attr.colspan]="mailTypeDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="mailType.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="mailType.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': mailType.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <table id=table3 mat-table [dataSource]="mailType.CampaignList" multiTemplateDataRows matSort
                            (matSortChange)="SortFunction($event, mailType)">
                            <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let campaign" class="expandBtnColumn">
                <button mat-icon-button (click)="ToggleExpansion(campaign)" class="returnsExpCollBtn">
                    <i class="material-icons" [ngClass]="CollapseListBtn(campaign)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button>
                <!-- <button mat-icon-button (click)="NextLevel(element, element.PhaseList)" class="returnsExpCollBtn">
                        <i class="material-icons" [ngClass]="ReadyToCollapseAll(element.PhaseList)?'custom_line_weight_icon':'mi_drag_handle'"></i>
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let campaign" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="campaign.Measure.Selected"
                    [(indeterminate)]="campaign.Measure.Indeterminate" (change)="ToogleChecks(campaign)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="CampaignName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Campaign
            </th>
            <!-- <td mat-cell *matCellDef="let campaign" class="mailLevelColumn"> {{element.CampaignName}} </td> -->
            <td mat-cell *matCellDef="let campaign" class="mailLevelColumn">
                <span class="allCollapseHeader" (click)="NextLevel(campaign, campaign.PhaseList)" [ngClass]="{
                        'font-campaignName-lg': GetVisibilityStyle(! campaign.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! campaign.Measure.Expanded) == 'visible'
                        }">{{campaign.CampaignName}}</span>
                <!-- <button mat-button class="allCollapseHeader" (click)="NextLevel(element, element.PhaseList)" [ngClass]="{
                            'font-campaignName-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                            'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                            }">{{element.CampaignName}}</button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                        'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                        'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                        'elementLast': mailType.Measure.IsLast == true,
                        'campaignElementDefault': mailType.Measure.IsLast == false
                    }"><span>Total
                    {{mailType.MailType}}</span></td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let campaign" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
            </th>
            <td mat-cell *matCellDef="let campaign" class="exchangeFlagColumn"><span>{{campaign.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"></td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                                'elementLast': mailType.Measure.IsLast == true,
                                'campaignElementDefault': mailType.Measure.IsLast == false
                            }"><span>{{mailType.Measure.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                           'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                                'elementLast': mailType.Measure.IsLast == true,
                                'campaignElementDefault': mailType.Measure.IsLast == false
                            }"><span>{{mailType.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net </th>
            <td mat-cell *matCellDef="let campaign">
                <span [ngClass]="{'negative':campaign.Measure.Net < 0}" *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                                'elementLast': mailType.Measure.IsLast == true,
                                'campaignElementDefault': mailType.Measure.IsLast == false
                            }"><span
                    [ngClass]="{'negative':mailType.Measure.Net < 0}">{{mailType.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM </th>
            <td mat-cell *matCellDef="let campaign">
                <span [ngClass]="{'negative':campaign.Measure.NLM < 0}" *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                                'elementLast': mailType.Measure.IsLast == true,
                                'campaignElementDefault': mailType.Measure.IsLast == false
                            }"><span
                    [ngClass]="{'negative':mailType.Measure.NLM < 0}">{{mailType.Measure.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                                'elementLast': mailType.Measure.IsLast == true,
                                'campaignElementDefault': mailType.Measure.IsLast == false
                            }"><span>{{mailType.Measure.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="mailType.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO </th>
            <td mat-cell *matCellDef="let campaign"><span *ngIf="!campaign.Measure.Expanded">{{campaign.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(mailType.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(mailType.CampaignList) == true,
                            'elementLast': mailType.Measure.IsLast == true,
                            'campaignElementDefault': mailType.Measure.IsLast == false
                        }"><span>{{mailType.Measure.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  PHASE START  <><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let campaign" [attr.colspan]="campaignDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="campaign.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="campaign.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': campaign.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <table id=table4 mat-table [dataSource]="campaign.PhaseList" multiTemplateDataRows matSort
                            (matSortChange)="SortFunction($event, campaign)">
                            <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let phase" class="expandBtnColumn">
                <button class="phaseToggleButton returnsExpCollBtn" mat-icon-button (click)="ToggleExpansion(phase)">
                    <i class="material-icons" [ngClass]="CollapseListBtn(phase)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button> </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let phase" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="phase.Measure.Selected"
                   [(indeterminate)]="phase.Measure.Indeterminate" (change)="ToogleChecks(phase)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="PhaseName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Phase
            </th>
            <!-- <td mat-cell *matCellDef="let phase" class="mailLevelColumn"> {{element.PhaseName}}</td> -->
            <td mat-cell *matCellDef="let phase" class="mailLevelColumn">
                <span [ngClass]="{
                        'font-phase-lg': GetVisibilityStyle(! phase.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! phase.Measure.Expanded) == 'visible'
                        }">{{phase.PhaseName}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>Total
                    {{campaign.CampaignName}}</span></td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let phase" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
            </th>
            <td mat-cell *matCellDef="let phase" class="exchangeFlagColumn"><span>{{phase.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"></td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                                 'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                                 'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                                 'elementLast': campaign.Measure.IsLast == true,
                                                 'phaseElementDefault': campaign.Measure.IsLast == false
                                             }"><span>{{campaign.Measure.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.NewDonors|number}}</span></td>
           <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                         'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                         'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                         'elementLast': campaign.Measure.IsLast == true,
                                         'phaseElementDefault': campaign.Measure.IsLast == false
                                     }"><span>{{campaign.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net
            </th>
            <td mat-cell *matCellDef="let phase">
                <span [ngClass]="{'negative':phase.Measure.Net < 0}" *ngIf="!phase.Measure.Expanded">{{phase.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                             'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                             'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                             'elementLast': campaign.Measure.IsLast == true,
                                             'phaseElementDefault': campaign.Measure.IsLast == false
                                         }"><span
                    [ngClass]="{'negative':campaign.Measure.Net < 0}">{{campaign.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM
            </th>
            <td mat-cell *matCellDef="let phase">
                <span [ngClass]="{'negative':phase.Measure.NLM < 0}" *ngIf="!phase.Measure.Expanded">{{phase.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                                 'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                                 'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                                 'elementLast': campaign.Measure.IsLast == true,
                                                 'phaseElementDefault': campaign.Measure.IsLast == false
                                             }"><span
                    [ngClass]="{'negative':campaign.Measure.NLM < 0}">{{campaign.Measure.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                         'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                         'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                         'elementLast': campaign.Measure.IsLast == true,
                                         'phaseElementDefault': campaign.Measure.IsLast == false
                                     }"><span>{{campaign.Measure.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="campaign.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO
            </th>
            <td mat-cell *matCellDef="let phase"><span *ngIf="!phase.Measure.Expanded">{{phase.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(campaign.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(campaign.PhaseList) == true,
                                     'elementLast': campaign.Measure.IsLast == true,
                                     'phaseElementDefault': campaign.Measure.IsLast == false
                                 }"><span>{{campaign.Measure.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  MAIL LIST START  <><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let phase" [attr.colspan]="phaseDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="phase.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="phase.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': phase.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <div [ngClass]="selectionMode?'phaseInfoBuffer2':'phaseInfoBuffer'"></div>
                        <div class="row">
                            <div class="col-lg-6">
                                <span class="sPackageTitle"> {{phase.Title}}</span>
                            </div>
                            <div class="col-lg-6 formatDiv">
                                <span class="sPackageFormat"> {{phase.Format}}</span>
                            </div>
                        </div>
                        <div [ngClass]="selectionMode? 'phaseInfoBuffer2':'phaseInfoBuffer'"></div>
                        <div class="row phaseInfoHeader">
                            <div class="col-lg-8"></div>
                            <div class="col-lg-2">
                                <a class="aPackagePDF">Package PDF</a>
                            </div>
                            <div class="col-lg-2">
                                <span class="sPackageDoubling">Doubling Days ({{phase.DoublingDays}})</span>
                            </div>
                        </div>
                        <table class="listTable" mat-table [dataSource]="phase.MailList" multiTemplateDataRows matSort
                            (matSortChange)="SortFunction($event, phase)">
                            <ng-container matColumnDef="PseudoExpand">
            <th mat-header-cell *matHeaderCellDef class="pseudoExpand">
            </th>
            <td mat-cell *matCellDef="let mailList" class="pseudoExpand">
            </td>
            <td mat-footer-cell *matFooterCellDef class="pseudoExpand" [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
            </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let mailList" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="mailList.Measure.Selected"
                    [(indeterminate)]="mailList.Measure.Indeterminate" (change)="ToogleChecks(mailList)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="MailCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn mailcodeCell"> Mail
                Code
            </th>
            <td mat-cell *matCellDef="let mailList" class="mailLevelColumn mailcodeCell"> {{mailList.MailCode}}</td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn mailcodeCell" [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                Total
                {{phase.PhaseName}} </td>
        </ng-container>
        <ng-container matColumnDef="MailDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn">
                Description
            </th>
            <td mat-cell *matCellDef="let mailList" class="descriptionColumn">
                <ng-container *ngIf="mailList.ListOwner == 0; then house; else prospect">
                </ng-container>
                <ng-template #prospect>
                    <span class="LinkUnderline">
                        <a title="{{ mailList.ListOwnerName }}" (click)="NavigateToListPerformance(mailList.ListOwnerAbr,null,null, startDate, endDate)">
                            {{mailList.ListOwnerAbr}}</a>
                        <span> / </span>
                        <a title="{{ mailList.ListManagerName }}" (click)="NavigateToListPerformance(mailList.ListOwnerAbr, mailList.ListManagerAbr,null, startDate, endDate)">
                            {{mailList.ListManagerAbr}}</a>
                        <span> / </span>
                        <a (click)="NavigateToListPerformance(mailList.ListOwnerAbr, mailList.ListManagerAbr, mailList.Recency, startDate, endDate)">
                            {{mailList.RecencyString}}
                        </a>
                    </span>
                </ng-template>
                <ng-template #house>
                    {{ mailList.MailDescription }}
                </ng-template>
            </td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                                             'listElementDefault': phase.Measure.IsLast == false,
                                             'elementLast': phase.Measure.IsLast == true
                                         }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" title="Type of List Order (Rental, Exchange, or House">
                T
            </th>
            <td mat-cell *matCellDef="let mailList" class="exchangeFlagColumn"> {{mailList.ExchangeFlag}}
            </td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                                             'listElementDefault': phase.Measure.IsLast == false,
                                             'elementLast': phase.Measure.IsLast == true
                                         }">
            </td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date"> Mailed
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.Mailed|date:'shortDate'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                        }">
                {{phase.Measure.Mailed|date:'shortDate'}} </td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data"> Caged
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.Caged|date:'shortDate'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.Caged|date:'shortDate'}} </td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Qty
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.Quantity|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.Quantity|number}} </td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Non
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.NonDonors|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                 'listElementDefault': phase.Measure.IsLast == false,
                                 'elementLast': phase.Measure.IsLast == true
                             }">
                {{phase.Measure.NonDonors|number}} </td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Donors
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.Donors|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.Donors|number}} </td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> New
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.NewDonors|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.NewDonors|number}} </td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate"> Rsp
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.RSP|percent:'1.2-2'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.RSP|percent:'1.2-2'}} </td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation"> Avg
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.AVG|currency:'USD':'symbol':'1.2-2'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.AVG|currency:'USD':'symbol':'1.2-2'}} </td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor"> CPD
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.CPD|currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.CPD|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Gross
            </th>
            <td mat-cell *matCellDef="let mailList">
                <span class="LinkUnderline">
                    <a (click)="NavigateToListGross(campaign.CampaignName, phase.PhaseName, mailList.MailCode)">{{mailList.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</a>
                </span>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                 'listElementDefault': phase.Measure.IsLast == false,
                                 'elementLast': phase.Measure.IsLast == true
                             }">
                <span class="LinkUnderline"><a (click)="NavigateToPhaseGross(campaign.CampaignName, phase.PhaseName)">{{phase.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</a></span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Net
            </th>
            <td mat-cell *matCellDef="let mailList" [ngClass]="{'negative':mailList.Measure.Net < 0}">
                {{mailList.Measure.Net|currency:'USD':'symbol':'1.0-0'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'listElementDefault': phase.Measure.IsLast == false,
                                     'elementLast': phase.Measure.IsLast == true,
                                     'negative': phase.Measure.Net < 0
                                 }">
                {{phase.Measure.Net|currency:'USD':'symbol':'1.0-0'}} </td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Cost
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.Cost|currency:'USD':'symbol':'1.0-0'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.Cost|currency:'USD':'symbol':'1.0-0'}} </td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed"> GLM
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.GPP|currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.GPP|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed">
                NLM </th>
            <td mat-cell *matCellDef="let mailList" [ngClass]="{'negative':mailList.Measure.NLM < 0}">
                {{mailList.Measure.NLM|
                currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                         'listElementDefault': phase.Measure.IsLast == false,
                                         'elementLast': phase.Measure.IsLast == true,
                                         'negative': phase.Measure.NLM < 0
                                     }">
                {{phase.Measure.NLM|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed"> CLM
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.CLM|currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                 'listElementDefault': phase.Measure.IsLast == false,
                                 'elementLast': phase.Measure.IsLast == true
                             }">
                {{phase.Measure.CLM|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost"> IO
            </th>
            <td mat-cell *matCellDef="let mailList"> {{mailList.Measure.IO|number:'1.2-2'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': phase.Measure.IsLast == false,
                             'elementLast': phase.Measure.IsLast == true
                         }">
                {{phase.Measure.IO|number:'1.2-2'}} </td>
        </ng-container>





        <tr mat-header-row *matHeaderRowDef="mailListDisplayedColumns" [ngClass]="{
                'selectionBoxUnchecked': phase.Measure.Selected == false
            }"></tr>
        <tr mat-row *matRowDef="let mailList; columns: mailListDisplayedColumns;" class="example-element-row" [ngClass]="{
                'selectionBoxUnchecked': mailList.Measure.Selected == false
            }">
        </tr>
        <tr mat-footer-row [ngStyle]="{'visibility':phase.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="mailListDisplayedColumns"
            [ngClass]="{
                    'selectionBoxUnchecked': phase.Measure.Selected == false
                }"></tr>
    </table>
</div>
</div>
</td>
</ng-container>
<tr mat-header-row [ngStyle]="{'visibility':campaign.PhaseList[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="phaseDisplayedColumns" [ngClass]="{
            'selectionBoxUnchecked': campaign.Measure.Selected == false
        }"></tr>
<tr mat-row *matRowDef="let phase; columns: phaseDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': phase.Measure.Expanded,
            'selectionBoxUnchecked': phase.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row [ngStyle]="{'visibility':campaign.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="phaseDisplayedColumns"
    [ngClass]="{
        'selectionBoxUnchecked': campaign.Measure.Selected == false
    }"></tr>
</table>
</div>
</div>
</td>
</ng-container>

<tr mat-header-row [ngStyle]="{'visibility':mailType.CampaignList[0].Measure.Expanded?'collapse':'visible' }"
   *matHeaderRowDef="campaignDisplayedColumns" [ngClass]="{
            'selectionBoxUnchecked': mailType.Measure.Selected == false
        }"></tr>
<tr mat-row *matRowDef="let campaign; columns: campaignDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': campaign.Measure.Expanded,
            'selectionBoxUnchecked': campaign.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row [ngStyle]="{'visibility':mailType.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="campaignDisplayedColumns"
    [ngClass]="{
        'selectionBoxUnchecked': mailType.Measure.Selected == false
    }"></tr>
</table>
</div>

</div>
</td>
</ng-container>
<tr mat-header-row [ngStyle]="{'visibility':client.MailTypeList[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="mailTypeDisplayedColumns" [ngClass]="{
            'selectionBoxUnchecked': client.Measure.Selected == false
        }"></tr>
<tr mat-row *matRowDef="let mailType; columns: mailTypeDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': mailType.Measure.Expanded,
            'selectionBoxUnchecked': mailType.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row [ngStyle]="{'visibility':client.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="mailTypeDisplayedColumns"
    class="mailTypeElementDefault" [ngClass]="{
            'selectionBoxUnchecked': client.Measure.Selected == false
        }"></tr>
</table>
</div>
</div>
</td>
</ng-container>
<tr mat-header-row [ngStyle]="{'visibility':this.rootReturns[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="clientDisplayedColumns"></tr>
<tr mat-row *matRowDef="let client; columns: clientDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': client.Measure.Expanded,
            'selectionBoxUnchecked': client.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row *matFooterRowDef="clientDisplayedColumns" [ngStyle]="{'visibility':this.rootReturns.length > 1?'visible':'collapse' }"
    class="clientElementDefault"></tr>
</table>
</div>


<!-- <><><><><><> TOOLBOX SETTINGS START <><><><><> -->
<!-- <><><><><><><><><><><<><><><>><><><><><> -->
<!-- <div (clickOutside)="closeToolbox()"> -->
<!--<><><> Main Toolbox <><><>-->
<button title="Tools" (click)="toggle(1)" id="toolboxBtn" class="btn toolboxButtonCollection" [ngClass]="{
                'btnShifted': toolsOpened,
                'hidden': hide
              }">
    <i class="material-icons" [ngClass]="toolsOpened?'mi_arrow_forward_ios':'mi_settings'"></i>
</button>
<div class="toolbox" [ngClass]="{
                'shifted': toolsOpened
              }">
    <!--In order to not have two scrollbars you need to put the inner elements to scroll and the parent to not scroll-->
    <div class="toolboxScrollContainer" [ngStyle]="{'visibility': visibility}">

        <mat-form-field class="tbElement">
            <input matInput #startDateInput (dateInput)="validateDate()" [matDatepicker]="startDatePicker" [(ngModel)]="startDate"
                placeholder="start date">
            <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="tbElement">
            <input matInput #endDateInput (dateInput)="validateDate()" [matDatepicker]="endDatePicker" [(ngModel)]="endDate"
                placeholder="end date">
            <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>
        <!-- Client - CL -->
        <mat-form-field class="tbElement">
            <mat-chip-list #CLchipList>
                <mat-chip *ngFor="let client of CLList" [selectable]="selectable" [removable]="removable" (removed)="CL_Remove(client)">
                    {{client}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Client..." #CLInput [formControl]="CLControl" [matAutocomplete]="CLauto"
                    [matChipInputFor]="CLchipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="CL_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #CLauto="matAutocomplete" (optionSelected)="CL_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let client of CLfilteredOptions | async" [value]="client">{{client}}</mat-option>
            </mat-autocomplete>
        </mat-form-field>

        <!-- Mail Type - MT -->
        <!-- <mat-form-field class="tbElement">
            <mat-chip-list #MTchipList>
                <mat-chip *ngFor="let mailtype of MTList" [selectable]="selectable" [removable]="removable" (removed)="MT_Remove(mailtype)">
                    {{mailtype}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Mail Type..." #MTInput [formControl]="MTControl" [matAutocomplete]="MTauto"
                    [matChipInputFor]="MTchipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="MT_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #MTauto="matAutocomplete" (optionSelected)="MT_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let mailtype of MTfilteredOptions | async" [value]="mailtype">{{mailtype}}</mat-option>
            </mat-autocomplete>
        </mat-form-field> -->

        <!-- Campaign - CA -->
        <!-- <mat-form-field class="tbElement">
            <mat-chip-list #CAchipList>
                <mat-chip *ngFor="let campaign of CAList" [selectable]="selectable" [removable]="removable" (removed)="CA_Remove(campaign)">
                    {{campaign}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Campaign..." #CAInput [formControl]="CAControl" [matAutocomplete]="CAauto"
                    [matChipInputFor]="CAchipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="CA_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #CAauto="matAutocomplete" (optionSelected)="CA_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let campaign of CAfilteredOptions | async" [value]="campaign">{{campaign}}</mat-option>
            </mat-autocomplete>
        </mat-form-field> -->

        <!-- Phase - PH -->
        <!-- <mat-form-field class="tbElement">
            <mat-chip-list #PHchipList>
                <mat-chip *ngFor="let phase of PHList" [selectable]="selectable" [removable]="removable" (removed)="PH_Remove(phase)">
                    {{phase}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Phase..." #PHInput [formControl]="PHControl" [matAutocomplete]="PHauto"
                    [matChipInputFor]="PHchipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="PH_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #PHauto="matAutocomplete" (optionSelected)="PH_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let phase of PHfilteredOptions | async" [value]="phase">{{phase}}</mat-option>
            </mat-autocomplete>
        </mat-form-field> -->


        <br>
        <div class="center-align">
            <button mat-raised-button color="accent" [disabled]="clients == '' || !validateDate()" (click)="applyChanges()">
                Search </button>
        </div>
        <br>
        <hr>
        <br>
        <div>
            <!-- (change)="testChange($event, clientTable)" -->
            <mat-slide-toggle [(ngModel)]="selectionMode">
                Omit Data
            </mat-slide-toggle>
            <!-- Scroll-fix (when height of screen is smaller) -->
            <div style="height: 150px; width:100%;"></div>
            <!-- <table *ngIf="selectionMode == true">
                        <tr>
                            <td>
                                <button mat-raised-button color="accent" (click)="applySelection()"> Show Selected</button>
                            </td>
                            <td>
                                <button mat-raised-button color="accent" (click)="clearSelection()"> Show All</button>
                            </td>
                        </tr>
                    </table> -->
        </div>
    </div>
</div>

<!--<><><> L2 Toolbox <><><>-->
<button title="Donor Demographics" (click)="toggle(2)" id="demoToolboxBtn" class="btn toolboxButtonCollection"
    [ngClass]="{
    'btnShifted': demoOpened,
    'hidden': hide
    }">
    <i class="material-icons" [ngClass]="toolsOpened?'mi_arrow_forward_ios':'mi_group'"></i>
</button>
<div class="toolbox" [ngClass]="{
    'shifted': demoOpened
    }">
    <!--In order to not have two scrollbars you need to put the inner elements to scroll and the parent to not scroll-->
    <div class="toolboxScrollContainer" [ngStyle]="{'visibility': visibility}">
        <h5 id="L2Header">Donor Information</h5>
        <hr>
        <p>
            Bacon ipsum dolor sit amet landjaeger sausage brisket, jerky drumstick fatback boudin ball tip turducken.
            Pork
            belly meatball
            t-bone bresaola tail filet mignon kevin turkey ribeye shank flank doner cow kielbasa shankle. Pig swine
            chicken
            hamburger, tenderloin turkey rump ball tip sirloin frankfurter meatloaf boudin brisket ham hock. Hamburger
            venison
           brisket tri-tip andouille pork belly ball tip short ribs biltong meatball chuck. Pork chop ribeye tail
            short
            ribs, beef hamburger meatball kielbasa rump corned beef porchetta landjaeger flank. Doner rump frankfurter
            meatball
            meatloaf, cow kevin pork pork loin venison fatback spare ribs salami beef ribs.
        </p>
        <p>
            Jerky jowl pork chop tongue, kielbasa shank venison. Capicola shank pig ribeye leberkas filet mignon
            brisket beef kevin tenderloin
            porchetta. Capicola fatback venison shank kielbasa, drumstick ribeye landjaeger beef kevin tail meatball
            pastrami
            prosciutto pancetta. Tail kevin spare ribs ground round ham ham hock brisket shoulder. Corned beef tri-tip
            leberkas
            flank sausage ham hock filet mignon beef ribs pancetta turkey.
        </p>
    </div>
</div>

<!-- </div> -->
