<div *ngIf="this.pageReady == false" class="loading-indicator">
    <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>
<div *ngIf="(this.pageReady == true) && (this.rootReturns)">
    <app-toolbar></app-toolbar>
    <table id="table1" mat-table [dataSource]="this.rootReturns" multiTemplateDataRows matSort (matSortChange)="SortFunction($event, this.rootReturns)">
        <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let element" class="expandBtnColumn">
                <button mat-icon-button (click)="ToggleExpansion(element)" class="returnsExpCollBtn">
                    <i class="material-icons md-elevation-z6" [ngClass]="CollapseListBtn(element)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button>
                <!-- <button mat-icon-button (click)="NextLevel(element, element.MailTypeList)" class="returnsExpCollBtn testButton">
                        <i class="material-icons" [ngClass]="ReadyToCollapseAll(element.MailTypeList)?'custom_line_weight_icon':'mi_drag_handle'"></i>
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>.
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let element" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" #clientTable [(ngModel)]="element.Measure.Selected" [(indeterminate)]="element.Measure.Indeterminate"
                    (change)="ToogleChecks(element)" *ngIf="selectionMode == true"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="Client">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn testColumn" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                <span>Client</span></th>
            <td mat-cell *matCellDef="let element" class="mailLevelColumn">
                <span class="allCollapseHeader" [ngClass]="{
                        'font-client-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                    }"
                    (click)="NextLevel(element, element.MailTypeList)">{{element.ClientName }}</span>
                <!-- <button mat-button class="allCollapseHeader"
                        [ngClass]="{
                            'font-client-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                            'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                        }"  (click)="NextLevel(element, element.MailTypeList)">{{element.ClientName }}
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn"> Total Clients </td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let element" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let element" class="exchangeFlagColumn"><span>{{element.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.Net < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span [ngClass]="{'negative':this.rootReturns[0].Measure.Net < 0}">{{
                    this.grandTotal.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM</th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.NLM < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span [ngClass]="{'negative':this.rootReturns[0].Measure.NLM < 0}">{{
                    this.grandTotal.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="this.rootReturns[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef><span>{{ this.grandTotal.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  MAIL TYPE START  <><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="clientDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="element.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="element.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': element.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <table id='table2' mat-table [dataSource]="element.MailTypeList" matSort (matSortChange)="SortFunction($event, element)"
                            multiTemplateDataRows>
                            <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let element" class="expandBtnColumn">
                <button mat-icon-button (click)="ToggleExpansion(element)" class="returnsExpCollBtn">
                    <i class="material-icons" [ngClass]="CollapseListBtn(element)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button>
                <!-- <button mat-icon-button (click)="NextLevel(element, element.CampaignList)" class="returnsExpCollBtn">
                        <i class="material-icons" [ngClass]="ReadyToCollapseAll(element.CampaignList)?'custom_line_weight_icon':'mi_drag_handle'"></i>
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let element" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="element.Measure.Selected"
                    [(indeterminate)]="element.Measure.Indeterminate" (change)="ToogleChecks(element)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="MailType">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mail Type </th>
            <!-- <td mat-cell *matCellDef="let element" class="mailLevelColumn"> {{element.MailType}} </td> -->
            <td mat-cell *matCellDef="let element" class="mailLevelColumn">
                <span class="allCollapseHeader" (click)="NextLevel(element, element.CampaignList)" [ngClass]="{
                        'font-mailType-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                            }">{{element.MailType}}</span>
                <!-- <button mat-button class="allCollapseHeader" (click)="NextLevel(element, element.CampaignList)" [ngClass]="{
                                'font-mailType-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                                'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                                    }">{{element.MailType}}</button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>Total
                    {{element.Client}}</span></td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let element" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
            </th>
            <td mat-cell *matCellDef="let element" class="exchangeFlagColumn"><span>{{element.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"></td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell mat-sort-header *matHeaderCellDef [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.Net < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span
                    [ngClass]="{'negative':element.Measure.Net < 0}">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.NLM < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span
                    [ngClass]="{'negative':element.Measure.NLM < 0}">{{element.Measure.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="element.MailTypeList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                    'elementCollapsed': ReadyToCollapseAll(element.MailTypeList) == false,
                    'elementExpanded':ReadyToCollapseAll(element.MailTypeList) == true,
                    'elementLast': element.Measure.IsLast == true,
                    'mailTypeElementDefault': element.Measure.IsLast == false
                }"><span>{{element.Measure.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  CAMPAIGN START  <><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="mailTypeDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="element.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="element.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': element.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <table id=table3 mat-table [dataSource]="element.CampaignList" multiTemplateDataRows matSort
                            (matSortChange)="SortFunction($event, element)">
                            <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let element" class="expandBtnColumn">
                <button mat-icon-button (click)="ToggleExpansion(element)" class="returnsExpCollBtn">
                    <i class="material-icons" [ngClass]="CollapseListBtn(element)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button>
                <!-- <button mat-icon-button (click)="NextLevel(element, element.PhaseList)" class="returnsExpCollBtn">
                        <i class="material-icons" [ngClass]="ReadyToCollapseAll(element.PhaseList)?'custom_line_weight_icon':'mi_drag_handle'"></i>
                    </button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let element" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="element.Measure.Selected"
                    [(indeterminate)]="element.Measure.Indeterminate" (change)="ToogleChecks(element)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="CampaignName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Campaign
            </th>
            <!-- <td mat-cell *matCellDef="let element" class="mailLevelColumn"> {{element.CampaignName}} </td> -->
            <td mat-cell *matCellDef="let element" class="mailLevelColumn">
                <span class="allCollapseHeader" (click)="NextLevel(element, element.PhaseList)" [ngClass]="{
                        'font-campaignName-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                        }">{{element.CampaignName}}</span>
                <!-- <button mat-button class="allCollapseHeader" (click)="NextLevel(element, element.PhaseList)" [ngClass]="{
                            'font-campaignName-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                            'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                            }">{{element.CampaignName}}</button> -->
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                        'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                        'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                        'elementLast': element.Measure.IsLast == true,
                        'campaignElementDefault': element.Measure.IsLast == false
                    }"><span>Total
                    {{element.MailType}}</span></td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let element" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
            </th>
            <td mat-cell *matCellDef="let element" class="exchangeFlagColumn"><span>{{element.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"></td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                                'elementLast': element.Measure.IsLast == true,
                                'campaignElementDefault': element.Measure.IsLast == false
                            }"><span>{{element.Measure.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                                'elementLast': element.Measure.IsLast == true,
                                'campaignElementDefault': element.Measure.IsLast == false
                            }"><span>{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.Net < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                                'elementLast': element.Measure.IsLast == true,
                                'campaignElementDefault': element.Measure.IsLast == false
                            }"><span
                    [ngClass]="{'negative':element.Measure.Net < 0}">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.NLM < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                                'elementLast': element.Measure.IsLast == true,
                                'campaignElementDefault': element.Measure.IsLast == false
                            }"><span
                    [ngClass]="{'negative':element.Measure.NLM < 0}">{{element.Measure.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                                'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                                'elementLast': element.Measure.IsLast == true,
                                'campaignElementDefault': element.Measure.IsLast == false
                            }"><span>{{element.Measure.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="element.CampaignList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                            'elementCollapsed': ReadyToCollapseAll(element.CampaignList) == false,
                            'elementExpanded':ReadyToCollapseAll(element.CampaignList) == true,
                            'elementLast': element.Measure.IsLast == true,
                            'campaignElementDefault': element.Measure.IsLast == false
                        }"><span>{{element.Measure.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  PHASE START  <><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="campaignDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="element.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="element.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': element.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <table id=table4 mat-table [dataSource]="element.PhaseList" multiTemplateDataRows matSort
                            (matSortChange)="SortFunction($event, element)">
                            <ng-container matColumnDef="Expand">
            <th mat-header-cell *matHeaderCellDef class="expandBtnColumn"></th>
            <td mat-cell *matCellDef="let element" class="expandBtnColumn">
                <button class="phaseToggleButton returnsExpCollBtn" mat-icon-button (click)="ToggleExpansion(element)">
                    <i class="material-icons" [ngClass]="CollapseListBtn(element)?'mi_arrow_drop_down':'mi_arrow_right'"></i>
                </button> </td>
            <td mat-footer-cell *matFooterCellDef class="expandBtnColumn"> </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let element" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="element.Measure.Selected"
                    [(indeterminate)]="element.Measure.Indeterminate" (change)="ToogleChecks(element)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="PhaseName">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Phase
            </th>
            <!-- <td mat-cell *matCellDef="let element" class="mailLevelColumn"> {{element.PhaseName}}</td> -->
            <td mat-cell *matCellDef="let element" class="mailLevelColumn">
                <span [ngClass]="{
                        'font-phase-lg': GetVisibilityStyle(! element.Measure.Expanded) == 'collapse',
                        'font-sm': GetVisibilityStyle(! element.Measure.Expanded) == 'visible'
                        }">{{element.PhaseName}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>Total
                    {{element.CampaignName}}</span></td>
        </ng-container>
        <ng-container matColumnDef="PseudoDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'"></th>
            <td mat-cell *matCellDef="let element" class="descriptionColumn"></td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
            </th>
            <td mat-cell *matCellDef="let element" class="exchangeFlagColumn"><span>{{element.ExchangeFlag}}</span></td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"></td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Mailed
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Mailed|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.Mailed|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Caged
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Caged|date:'shortDate'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.Caged|date:'shortDate'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Qty
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Quantity|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.Quantity|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Non
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NonDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                                 'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                                 'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                                 'elementLast': element.Measure.IsLast == true,
                                                 'phaseElementDefault': element.Measure.IsLast == false
                                             }"><span>{{element.Measure.NonDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Donors
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Donors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.Donors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                New
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.NewDonors|number}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.NewDonors|number}}</span></td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Rsp
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.RSP|percent:'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Avg
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CPD
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CPD|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.CPD|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Gross
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                         'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                         'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                         'elementLast': element.Measure.IsLast == true,
                                         'phaseElementDefault': element.Measure.IsLast == false
                                     }"><span>{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Net
            </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.Net < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                             'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                             'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                             'elementLast': element.Measure.IsLast == true,
                                             'phaseElementDefault': element.Measure.IsLast == false
                                         }"><span
                    [ngClass]="{'negative':element.Measure.Net < 0}">{{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                Cost
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}}</span></td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                GLM
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.GPP|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.GPP|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                NLM
            </th>
            <td mat-cell *matCellDef="let element">
                <span [ngClass]="{'negative':element.Measure.NLM < 0}" *ngIf="!element.Measure.Expanded">{{element.Measure.NLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                                 'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                                 'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                                 'elementLast': element.Measure.IsLast == true,
                                                 'phaseElementDefault': element.Measure.IsLast == false
                                             }"><span
                    [ngClass]="{'negative':element.Measure.NLM < 0}">{{element.Measure.NLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                CLM
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.CLM|currency}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                         'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                         'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                         'elementLast': element.Measure.IsLast == true,
                                         'phaseElementDefault': element.Measure.IsLast == false
                                     }"><span>{{element.Measure.CLM|currency}}</span></td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost" [ngClass]="element.PhaseList[0].Measure.Expanded?'headerCollapsed':'headerExpanded'">
                IO
            </th>
            <td mat-cell *matCellDef="let element"><span *ngIf="!element.Measure.Expanded">{{element.Measure.IO|number:'1.2-2'}}</span></td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'elementCollapsed': ReadyToCollapseAll(element.PhaseList) == false,
                                     'elementExpanded':ReadyToCollapseAll(element.PhaseList) == true,
                                     'elementLast': element.Measure.IsLast == true,
                                     'phaseElementDefault': element.Measure.IsLast == false
                                 }"><span>{{element.Measure.IO|number:'1.2-2'}}</span></td>
        </ng-container>


        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><>  MAIL LIST START  <><><><><><><><><><><><><><><> -->
        <!-- <><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><><> -->
        <ng-container matColumnDef="expandedDetail">
            <td mat-cell *matCellDef="let element" [attr.colspan]="phaseDisplayedColumns.length">
                <div class="example-element-detail" [@detailExpand]="element.Measure.Expanded?'expanded':'collapsed'"
                    [style.height]="element.Measure.Expanded?'unset':'0 !important'" [ngClass]="{
                            'selectionBoxUnchecked': element.Measure.Selected == false
                        }">
                    <div style="width:100%">
                        <div [ngClass]="selectionMode?'phaseInfoBuffer2':'phaseInfoBuffer'"></div>
                        <div class="row">
                            <div class="col-lg-6">
                                <span class="sPackageTitle"> {{element.Title}}</span>
                            </div>
                            <div class="col-lg-6 formatDiv">
                                <span class="sPackageFormat"> {{element.Format}}</span>
                            </div>
                        </div>
                        <div [ngClass]="selectionMode? 'phaseInfoBuffer2':'phaseInfoBuffer'"></div>
                        <div class="row phaseInfoHeader">
                            <div class="col-lg-8"></div>
                            <div class="col-lg-2">
                                <a class="aPackagePDF">Package PDF</a>
                            </div>
                            <div class="col-lg-2">
                                <span class="sPackageDoubling">Doubling Days ({{element.DoublingDays}})</span>
                            </div>
                        </div>
                        <table class="listTable" mat-table [dataSource]="element.MailList" multiTemplateDataRows
                            matSort (matSortChange)="SortFunction($event, element)">
                            <ng-container matColumnDef="PseudoExpand">
            <th mat-header-cell *matHeaderCellDef class="pseudoExpand">
            </th>
            <td mat-cell *matCellDef="let element" class="pseudoExpand">
            </td>
            <td mat-footer-cell *matFooterCellDef class="pseudoExpand" [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
            </td>
        </ng-container>
        <ng-container matColumnDef="selectionBox">
            <th mat-header-cell *matHeaderCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></th>
            <td mat-cell *matCellDef="let element" [ngClass]="selectionMode? 'sbcShifted':'sbc'">
                <mat-checkbox class="md-checkbox" *ngIf="selectionMode == true" [(ngModel)]="element.Measure.Selected"
                    [(indeterminate)]="element.Measure.Indeterminate" (change)="ToogleChecks(element)"></mat-checkbox>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="selectionMode? 'sbcShifted':'sbc'"></td>
        </ng-container>
        <ng-container matColumnDef="MailCode">
            <th mat-header-cell *matHeaderCellDef mat-sort-header class="mailLevelColumn"> Mail
                Code
            </th>
            <td mat-cell *matCellDef="let element" class="mailLevelColumn"> {{element.MailCode}}
            </td>
            <td mat-footer-cell *matFooterCellDef class="mailLevelColumn" [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                Total
                {{element.PhaseName}} </td>
        </ng-container>
        <ng-container matColumnDef="MailDescription">
            <th mat-header-cell *matHeaderCellDef class="descriptionColumn">
                Description
            </th>
            <td mat-cell *matCellDef="let element" class="descriptionColumn">
                <ng-container *ngIf="element.ListOwner == 0; then house; else prospect">
                </ng-container>
                <ng-template #prospect>
                    <span class="ListDescription">
                        <a title="{{ element.ListOwnerName }}" (click)="NavigateToListPerformance(element.ListOwnerAbr,null,null, startDate, endDate)">
                            {{element.ListOwnerAbr}}</a>
                        <span> / </span>
                        <a title="{{ element.ListManagerName }}" (click)="NavigateToListPerformance(element.ListOwnerAbr, element.ListManagerAbr,null, startDate, endDate)">
                            {{element.ListManagerAbr}}</a>
                        <span> / </span>
                        <a (click)="NavigateToListPerformance(element.ListOwnerAbr, element.ListManagerAbr, element.Recency, startDate, endDate)">
                            {{element.RecencyString}}
                        </a>
                    </span>
                </ng-template>
                <ng-template #house>
                    {{ element.MailDescription }}
                </ng-template>
            </td>
            <td mat-footer-cell *matFooterCellDef class="descriptionColumn" [ngClass]="{
                                             'listElementDefault': element.Measure.IsLast == false,
                                             'elementLast': element.Measure.IsLast == true
                                         }"></td>
        </ng-container>
        <ng-container matColumnDef="ExchangeFlag">
            <th mat-header-cell *matHeaderCellDef class="exchangeFlagColumn" title="Type of List Order (Rental, Exchange, or House">
                T
            </th>
            <td mat-cell *matCellDef="let element" class="exchangeFlagColumn"> {{element.ExchangeFlag}}
            </td>
            <td mat-footer-cell *matFooterCellDef class="exchangeFlagColumn" [ngClass]="{
                                             'listElementDefault': element.Measure.IsLast == false,
                                             'elementLast': element.Measure.IsLast == true
                                         }">
            </td>
        </ng-container>
        <ng-container matColumnDef="Mailed">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Drop Date"> Mailed
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.Mailed|date:'shortDate'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.Mailed|date:'shortDate'}} </td>
        </ng-container>
        <ng-container matColumnDef="Caged">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Date of most recent cage data"> Caged
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.Caged|date:'shortDate'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.Caged|date:'shortDate'}} </td>
        </ng-container>
        <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Qty
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.Quantity|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.Quantity|number}} </td>
        </ng-container>
        <ng-container matColumnDef="NonDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Non
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.NonDonors|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                 'listElementDefault': element.Measure.IsLast == false,
                                 'elementLast': element.Measure.IsLast == true
                             }">
                {{element.Measure.NonDonors|number}} </td>
        </ng-container>
        <ng-container matColumnDef="Donors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Donors
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.Donors|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.Donors|number}} </td>
        </ng-container>
        <ng-container matColumnDef="NewDonors">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> New
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.NewDonors|number}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.NewDonors|number}} </td>
        </ng-container>
        <ng-container matColumnDef="RSP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Response Rate"> Rsp
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.RSP|percent:'1.2-2'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.RSP|percent:'1.2-2'}} </td>
        </ng-container>
        <ng-container matColumnDef="AVG">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Average donation"> Avg
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.AVG|currency:'USD':'symbol':'1.2-2'}} </td>
        </ng-container>
        <ng-container matColumnDef="CPD">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per donor"> CPD
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.CPD|currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.CPD|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="Gross">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Gross
            </th>
            <td mat-cell *matCellDef="let element">
                <span class="ListDescription">
                    <a (click)="NavigateToListGross(element.PackageCode, element.Name, element.MailCode)">{{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}}</a>
            </span>
            </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                 'listElementDefault': element.Measure.IsLast == false,
                                 'elementLast': element.Measure.IsLast == true
                             }">
                             {{element.Measure.Gross|currency:'USD':'symbol':'1.0-0'}} </td>
        </ng-container>
        <ng-container matColumnDef="Net">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Net
            </th>
            <td mat-cell *matCellDef="let element" [ngClass]="{'negative':element.Measure.Net < 0}">
                {{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                     'listElementDefault': element.Measure.IsLast == false,
                                     'elementLast': element.Measure.IsLast == true,
                                     'negative': element.Measure.Net < 0
                                 }">
                {{element.Measure.Net|currency:'USD':'symbol':'1.0-0'}} </td>
        </ng-container>
        <ng-container matColumnDef="Cost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Cost
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.Cost|currency:'USD':'symbol':'1.0-0'}} </td>
        </ng-container>
        <ng-container matColumnDef="GPP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount grossed per Letter Mailed"> GLM
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.GPP|currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.GPP|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="NLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Amount net per letter mailed">
                NLM </th>
            <td mat-cell *matCellDef="let element" [ngClass]="{'negative':element.Measure.NLM < 0}">
                {{element.Measure.NLM|
                currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                         'listElementDefault': element.Measure.IsLast == false,
                                         'elementLast': element.Measure.IsLast == true,
                                         'negative': element.Measure.NLM < 0
                                     }">
                {{element.Measure.NLM|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="CLM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Cost per Letter Mailed"> CLM
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.CLM|currency}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                                 'listElementDefault': element.Measure.IsLast == false,
                                 'elementLast': element.Measure.IsLast == true
                             }">
                {{element.Measure.CLM|currency}} </td>
        </ng-container>
        <ng-container matColumnDef="IO">
            <th mat-header-cell *matHeaderCellDef mat-sort-header title="Gross/Cost"> IO
            </th>
            <td mat-cell *matCellDef="let element"> {{element.Measure.IO|number:'1.2-2'}} </td>
            <td mat-footer-cell *matFooterCellDef [ngClass]="{
                             'listElementDefault': element.Measure.IsLast == false,
                             'elementLast': element.Measure.IsLast == true
                         }">
                {{element.Measure.IO|number:'1.2-2'}} </td>
        </ng-container>





        <tr mat-header-row *matHeaderRowDef="mailListDisplayedColumns" [ngClass]="{
                'selectionBoxUnchecked': element.Measure.Selected == false
            }"></tr>
        <tr mat-row *matRowDef="let element; columns: mailListDisplayedColumns;" class="example-element-row" [ngClass]="{
                'selectionBoxUnchecked': element.Measure.Selected == false
            }">
        </tr>
        <tr mat-footer-row [ngStyle]="{'visibility':element.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="mailListDisplayedColumns"
            [ngClass]="{
                    'selectionBoxUnchecked': element.Measure.Selected == false
                }"></tr>
    </table>
</div>
</div>
</td>
</ng-container>
<tr mat-header-row [ngStyle]="{'visibility':element.PhaseList[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="phaseDisplayedColumns" [ngClass]="{
            'selectionBoxUnchecked': element.Measure.Selected == false
        }"></tr>
<tr mat-row *matRowDef="let element; columns: phaseDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': element.Measure.Expanded,
            'selectionBoxUnchecked': element.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row [ngStyle]="{'visibility':element.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="phaseDisplayedColumns"
    [ngClass]="{
        'selectionBoxUnchecked': element.Measure.Selected == false
    }"></tr>
</table>
</div>
</div>
</td>
</ng-container>

<tr mat-header-row [ngStyle]="{'visibility':element.CampaignList[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="campaignDisplayedColumns" [ngClass]="{
            'selectionBoxUnchecked': element.Measure.Selected == false
        }"></tr>
<tr mat-row *matRowDef="let element; columns: campaignDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': element.Measure.Expanded,
            'selectionBoxUnchecked': element.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row [ngStyle]="{'visibility':element.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="campaignDisplayedColumns"
    [ngClass]="{
        'selectionBoxUnchecked': element.Measure.Selected == false
    }"></tr>
</table>
</div>

</div>
</td>
</ng-container>
<tr mat-header-row [ngStyle]="{'visibility':element.MailTypeList[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="mailTypeDisplayedColumns" [ngClass]="{
            'selectionBoxUnchecked': element.Measure.Selected == false
        }"></tr>
<tr mat-row *matRowDef="let element; columns: mailTypeDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': element.Measure.Expanded,
            'selectionBoxUnchecked': element.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row [ngStyle]="{'visibility':element.Measure.Expanded?'visible':'collapse' }" *matFooterRowDef="mailTypeDisplayedColumns"
    class="mailTypeElementDefault" [ngClass]="{
            'selectionBoxUnchecked': element.Measure.Selected == false
        }"></tr>
</table>
</div>
</div>
</td>
</ng-container>
<tr mat-header-row [ngStyle]="{'visibility':this.rootReturns[0].Measure.Expanded?'collapse':'visible' }"
    *matHeaderRowDef="clientDisplayedColumns"></tr>
<tr mat-row *matRowDef="let element; columns: clientDisplayedColumns;" class="example-element-row" [ngClass]="{
            'example-expanded-row': element.Measure.Expanded,
            'selectionBoxUnchecked': element.Measure.Selected == false
        }">
</tr>
<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<tr mat-footer-row *matFooterRowDef="clientDisplayedColumns" [ngStyle]="{'visibility':this.rootReturns.length > 1?'visible':'collapse' }"
    class="clientElementDefault"></tr>
</table>
</div>


<!-- <><><><><><> TOOLBOX SETTINGS START <><><><><> -->
<!-- <><><><><><><><><><><<><><><>><><><><><> -->
<!-- <div (clickOutside)="closeToolbox()"> -->
<!--<><><> Main Toolbox <><><>-->
<button title="Tools" (click)="toggle(1)" id="toolboxBtn" class="btn toolboxButtonCollection" [ngClass]="{
                'btnShifted': toolsOpened,
                'hidden': hide
              }">
    <i class="material-icons" [ngClass]="toolsOpened?'mi_arrow_forward_ios':'mi_settings'"></i>
</button>
<div class="toolbox" [ngClass]="{
                'shifted': toolsOpened
              }">
    <!--In order to not have two scrollbars you need to put the inner elements to scroll and the parent to not scroll-->
    <div class="toolboxScrollContainer" [ngStyle]="{'visibility': visibility}">
        
        <!-- Client - CL -->
        <mat-form-field class="tbElement">
            <mat-chip-list #chipList>
                <mat-chip *ngFor="let client of CLList"
                 [selectable]="selectable" 
                 [removable]="removable" 
                 (removed)="CL_Remove(client)">
                    {{client}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Client..." #CLInput 
                [formControl]="CLControl" 
                [matAutocomplete]="auto"
                [matChipInputFor]="chipList" 
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="addOnBlur" 
                (matChipInputTokenEnd)="CL_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="CL_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let client of CLfilteredOptions | async" [value]="client">{{client}}</mat-option>
            </mat-autocomplete>
        </mat-form-field>

        <!-- Mail Type - MT -->
        <mat-form-field class="tbElement">
            <mat-chip-list #chipList>
                <mat-chip *ngFor="let mailtype of MTList"
                 [selectable]="selectable" 
                 [removable]="removable" 
                 (removed)="MT_Remove(mailtype)">
                    {{mailtype}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Mail Type..." #MTInput 
                [formControl]="MTControl" 
                [matAutocomplete]="auto"
                [matChipInputFor]="chipList" 
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="addOnBlur" 
                (matChipInputTokenEnd)="MT_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="MT_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let mailtype of MTfilteredOptions | async" [value]="mailtype">{{mailtype}}</mat-option>
            </mat-autocomplete>
        </mat-form-field>
        
        <!-- Campaign - CA -->
        <mat-form-field class="tbElement">
            <mat-chip-list #chipList>
                <mat-chip *ngFor="let campaign of CAList"
                [selectable]="selectable" 
                [removable]="removable" 
                (removed)="CA_Remove(campaign)">
                    {{campaign}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Campaign..." #CAInput 
                [formControl]="CAControl" 
                [matAutocomplete]="auto"
                [matChipInputFor]="chipList" 
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="addOnBlur" 
                (matChipInputTokenEnd)="CA_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="CA_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let campaign of CAfilteredOptions | async" [value]="campaign">{{campaign}}</mat-option>
            </mat-autocomplete>
        </mat-form-field>

        <!-- Phase - PH -->
        <mat-form-field class="tbElement">
            <mat-chip-list #chipList>
                <mat-chip *ngFor="let phase of PHList"
                 [selectable]="selectable" 
                 [removable]="removable" 
                 (removed)="PH_Remove(phase)">
                    {{phase}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Phase..." #PHInput 
                [formControl]="PHControl" 
                [matAutocomplete]="auto"
                [matChipInputFor]="chipList" 
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="addOnBlur" 
                (matChipInputTokenEnd)="PH_Add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="PH_Selected($event)">
                <mat-option class="md-custom-option" *ngFor="let phase of PHfilteredOptions | async" [value]="phase">{{phase}}</mat-option>
            </mat-autocomplete>
        </mat-form-field>

<!-- 
        <mat-form-field class="tbElement">
            <mat-chip-list #chipList>
                <mat-chip *ngFor="let client of clients"
                 [selectable]="selectable" 
                 [removable]="removable" 
                 (removed)="remove(client)">
                    {{client}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Client..." #clientListInput 
                [formControl]="clientControl" 
                [matAutocomplete]="auto"
                [matChipInputFor]="chipList" 
                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                [matChipInputAddOnBlur]="addOnBlur" 
                (matChipInputTokenEnd)="add($event)">
            </mat-chip-list>
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                <mat-option class="md-custom-option" *ngFor="let client of filteredOptions | async" [value]="client">{{client}}</mat-option>
            </mat-autocomplete>
        </mat-form-field> -->

        <mat-form-field class="tbElement">
            <input matInput #startDateInput (dateInput)="validateDate()" [matDatepicker]="startDatePicker" [(ngModel)]="startDate"
                placeholder="start date">
            <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="tbElement">
            <input matInput #endDateInput (dateInput)="validateDate()" [matDatepicker]="endDatePicker" [(ngModel)]="endDate"
                placeholder="end date">
            <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
            <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>
        <br>
        <div class="center-align">
            <button mat-raised-button color="accent" [disabled]="clients == '' || !validateDate()" (click)="applyChanges()">
                Search </button>
        </div>
        <br>
        <hr>
        <br>
        <div>
            <!-- (change)="testChange($event, clientTable)" -->
            <mat-slide-toggle [(ngModel)]="selectionMode">
                Omit Data
            </mat-slide-toggle>
            <!-- Scroll-fix (when height of screen is smaller) -->
            <div style="height: 150px; width:100%;"></div>
            <!-- <table *ngIf="selectionMode == true">
                        <tr>
                            <td>
                                <button mat-raised-button color="accent" (click)="applySelection()"> Show Selected</button>
                            </td>
                            <td>
                                <button mat-raised-button color="accent" (click)="clearSelection()"> Show All</button>
                            </td>
                        </tr>
                    </table> -->
        </div>
    </div>
</div>

<!--<><><> L2 Toolbox <><><>-->
<button title="Donor Demographics" (click)="toggle(2)" id="demoToolboxBtn" class="btn toolboxButtonCollection"
    [ngClass]="{
    'btnShifted': demoOpened,
    'hidden': hide
    }">
    <i class="material-icons" [ngClass]="toolsOpened?'mi_arrow_forward_ios':'mi_group'"></i>
</button>
<div class="toolbox" [ngClass]="{
    'shifted': demoOpened
    }">
    <!--In order to not have two scrollbars you need to put the inner elements to scroll and the parent to not scroll-->
    <div class="toolboxScrollContainer" [ngStyle]="{'visibility': visibility}">
        <h5 id="L2Header">Donor Information</h5>
        <hr>
        <p>
            Bacon ipsum dolor sit amet landjaeger sausage brisket, jerky drumstick fatback boudin ball tip turducken.
            Pork
            belly meatball
            t-bone bresaola tail filet mignon kevin turkey ribeye shank flank doner cow kielbasa shankle. Pig swine
            chicken
            hamburger, tenderloin turkey rump ball tip sirloin frankfurter meatloaf boudin brisket ham hock. Hamburger
            venison
            brisket tri-tip andouille pork belly ball tip short ribs biltong meatball chuck. Pork chop ribeye tail
            short
            ribs, beef hamburger meatball kielbasa rump corned beef porchetta landjaeger flank. Doner rump frankfurter
            meatball
            meatloaf, cow kevin pork pork loin venison fatback spare ribs salami beef ribs.
        </p>
        <p>
            Jerky jowl pork chop tongue, kielbasa shank venison. Capicola shank pig ribeye leberkas filet mignon
            brisket beef kevin tenderloin
            porchetta. Capicola fatback venison shank kielbasa, drumstick ribeye landjaeger beef kevin tail meatball
            pastrami
            prosciutto pancetta. Tail kevin spare ribs ground round ham ham hock brisket shoulder. Corned beef tri-tip
            leberkas
            flank sausage ham hock filet mignon beef ribs pancetta turkey.
        </p>
    </div>
</div>

<!-- </div> -->
