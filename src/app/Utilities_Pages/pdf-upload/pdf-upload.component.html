<app-toolbar></app-toolbar>
<br>

<div class="container">
  <mat-card class="mat-elevation-z8">

    <div class="row">

      <div class="col-md-6">
        <mat-form-field appearance="outline" class="selectionElement">
          <mat-chip-list #CLchipList>
            <mat-chip *ngFor="let client of CLList" [selectable]="selectable" [removable]="removable" (removed)="CL_Remove(client)">
              {{client}}
              <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
            </mat-chip>
            <input [placeholder]="clientPlaceholder" #CLInput [formControl]="CLControl" [matAutocomplete]="CLauto"
              [matChipInputFor]="CLchipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="CL_Add($event)">
          </mat-chip-list>
          <mat-autocomplete #CLauto="matAutocomplete" (optionSelected)="CL_Selected($event)">
            <mat-option class="md-custom-option" *ngFor="let client of CLfilteredOptions | async" [value]="client">{{client}}</mat-option>
          </mat-autocomplete>
          <mat-icon matSuffix class="dropdownIcon">arrow_drop_down</mat-icon>
        </mat-form-field>
      </div>

      <div class="col-md-3">
        <mat-form-field class="selectionElement">
          <input matInput #startDateInput (dateInput)="validateDate()" [matDatepicker]="startDatePicker" [(ngModel)]="startDate"
            placeholder="start date">
          <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #startDatePicker></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col-md-3">
        <mat-form-field class="selectionElement">
          <input matInput #endDateInput (dateInput)="validateDate()" [matDatepicker]="endDatePicker" [(ngModel)]="endDate"
            placeholder="end date">
          <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
          <mat-datepicker #endDatePicker></mat-datepicker>
        </mat-form-field>
      </div>
    </div>


    <div style="width:100%; height: 4px;">
        <mat-progress-bar color="accent" mode="indeterminate" *ngIf="loading == true"></mat-progress-bar>
      </div>

    <div class="row" *ngIf="loading == false">
      <table mat-table [dataSource]="tableData" matSort (matSortChange)="SortFunction($event, tableData)">
        <ng-container matColumnDef="PackageName">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Phase Name</th>
          <td mat-cell *matCellDef="let element">{{element.PhaseName}}</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>
        <ng-container matColumnDef="Client">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Client </th>
          <td mat-cell *matCellDef="let element"> {{element.gClientAcronym}} </td>
        </ng-container>
        <ng-container matColumnDef="Date">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Mail Date </th>
          <td mat-cell *matCellDef="let element"> {{element.MailDate|date:'shortDate'}} </td>
        </ng-container>
        <ng-container matColumnDef="Description">
          <th mat-header-cell *matHeaderCellDef> Package Title </th>
          <td mat-cell *matCellDef="let element"> {{element.PhaseTitle}} </td>
        </ng-container>
        <ng-container matColumnDef="Link">
          <th mat-header-cell *matHeaderCellDef> PDF Link </th>
          <td mat-cell *matCellDef="let element">
            <a *ngIf="element.HasPDF == true" href="https://sd360.sunrisedataservices.com/api/LoadPDF?PhaseID={{element.PhaseID}}" target="_blank"><i class="material-icons">launch</i></a>
            <span *ngIf="element.HasPDF == false">None</span>
          </td>
        </ng-container>
        <ng-container matColumnDef="ButtonControl">
          <th mat-header-cell *matHeaderCellDef class="ButtonControlCell">
            <button mat-mini-fab><i class="material-icons">filter_list</i>
              
            </button>
          </th>
          <td mat-cell *matCellDef="let element" class="ButtonControlCell">
            <!-- <button mat-icon-button *ngIf="element.showEditButton" (click)="navigateToEdit(element)"><i class="material-icons">edit</i></button> -->
          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="MainDisplayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: MainDisplayedColumns;" (mouseenter)="hoverRow(row)" (mouseleave)="hoverLeave(row)"></tr>
      </table>
    </div>
  </mat-card>

</div>